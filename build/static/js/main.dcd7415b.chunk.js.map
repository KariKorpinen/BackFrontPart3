{"version":3,"sources":["components/Phone.js","components/PersonForm.js","components/Filter.js","services/phones.js","App.js","index.js"],"names":["Phone","props","className","person","name","number","onClick","deletePhone","id","PersonForm","console","log","onSubmit","addPhone","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","searchItem","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","showAll","setShowAll","setSearchItem","setItemsFind","errorMessage","setErrorMessage","normalMessage","setNormalMessage","useEffect","phoneService","initialPersons","window","confirm","returnedPhone","filter","setTimeout","catch","error","phonesToShow","toLowerCase","includes","filterResults","event","target","preventDefault","exists","find","element","updatedPhone","map","phone","concat","key","ReactDOM","render","document","getElementById"],"mappings":"mQAUeA,EARD,SAAEC,GACd,OAAQ,wBAAIC,UAAU,WAAWD,EAAME,OAAOC,KAAtC,KAA8CH,EAAME,OAAOE,OAC3D,4BAAQC,QAAS,WAAOL,EAAMM,YAAYN,EAAME,OAAOK,MAAvD,aCwBKC,EA1BI,SAACR,GAGjB,OAFFS,QAAQC,IAAI,WAAaV,GAGrB,6BACE,0BAAMW,SAAUX,EAAMY,UACrB,qCACC,2BACGC,MAAOb,EAAMc,QACbC,SAAUf,EAAMgB,oBAEpB,uCACC,2BACGH,MAAOb,EAAMiB,UACbF,SAAUf,EAAMkB,sBAIpB,6BAAK,4BAAQC,KAAK,UAAb,WCNEC,EAZA,SAACpB,GAEf,OACG,kDACG,2BACGa,MAAOb,EAAMqB,WACbN,SAAUf,EAAMsB,uB,gBCPpBC,EAAU,oCAwBD,EArBA,WAGb,OAFgBC,IAAMC,IAAIF,GAEXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB5B,EAfA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa5B,EAVA,SAACrB,EAAIsB,GAElB,OADgBL,IAAMO,IAAN,UAAaR,EAAb,YAAwBhB,GAAMsB,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ5B,EALE,SAACrB,GAEhB,OADgBiB,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BhB,IAC5BmB,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCsN5BK,EArOH,WAAO,IAAD,EAEeC,mBAAS,IAFxB,mBAERC,EAFQ,KAECC,EAFD,OAGgBF,mBAAS,IAHzB,mBAGRpB,EAHQ,KAGCuB,EAHD,OAIoBH,mBAAS,IAJ7B,mBAIRjB,EAJQ,KAIGqB,EAJH,OAMcJ,mBAAS,IANvB,mBAMTK,EANS,KAMAC,EANA,OAOoBN,mBAAS,IAP7B,mBAOTb,EAPS,KAOGoB,EAPH,OAQwBP,mBAAS,IARjC,mBAQQQ,GARR,aASwBR,mBAAS,MATjC,mBASTS,EATS,KASKC,EATL,OAU0BV,mBAAS,MAVnC,mBAUTW,EAVS,KAUMC,EAVN,KAYhBC,qBAAU,WACPC,IAEItB,MAAK,SAAAuB,GACJb,EAAWa,QAGhB,IAGH,IAsEM3C,EAAc,SAAAC,GACd2C,OAAOC,QAAQ,+CAElBH,EAEczC,GACRmB,MAAK,SAAA0B,GACNhB,EAAWD,EAAQkB,QAAO,SAAAlB,GAAO,OAAIA,EAAQ5B,KAAOA,MACpDuC,EAAiB,kBACbQ,YAAW,WACTR,EAAiB,QAChB,QAENS,OAAM,SAAAC,GACDZ,EAAgB,WAAD,OACF9B,EADE,iDAGfwC,YAAW,WACRV,EAAgB,QAChB,KACHR,EAAWD,EAAQkB,QAAO,SAAAlB,GAAO,OAAIA,EAAQ5B,KAAOA,UAmB5DkD,EAAelB,EAChBJ,EACAA,EAAQkB,QAAO,SAAAnD,GAAM,OAAIA,EAAOC,KAAKuD,cAAcC,SAAStC,MAGhE0B,qBAAU,WAEH,IAAMa,EAAgBzB,EAAQkB,QAAO,SAAAnD,GAAM,OAE/CA,EAAOC,KAAKuD,cAAcC,SAAStC,MAErCqB,EAAakB,KAEX,CAACvC,IAyBL,OACE,6BACE,yCACA,mBAduB,SAAC,GAAuB,IAArBwB,EAAoB,EAApBA,cAC3B,OAAsB,OAAlBA,EACK,KAGN,yBAAK5C,UAAU,UACZ4C,KAQL,CAAoBA,cAAeA,IACnC,mBA1BsB,SAAC,GAAsB,IAApBF,EAAmB,EAAnBA,aAC1B,OAAqB,OAAjBA,EACK,KAGN,yBAAK1C,UAAU,SACZ0C,KAoBL,CAAmBA,aAAcA,IAEjC,kBAAC,EAAD,CAAQtB,WAAYA,EAAYC,mBAjDT,SAACuC,GACzBpD,QAAQC,IAAImD,EAAMC,OAAOjD,OACzB4B,EAAcoB,EAAMC,OAAOjD,QAgD1B2B,WAAYA,EAAYD,QAASA,IAGjC,0CAEA,kBAAC,EAAD,CAAY3B,SA/JC,SAACiD,GACdA,EAAME,iBAKN,IAAMC,EAAS7B,EAAQ8B,MAAK,SAAAC,GAAO,OAAIA,EAAQ/D,OAASW,MACxDL,QAAQC,IAAI,aAAcsD,GACtBA,GACCd,OAAOC,QAAP,UAAkBrC,EAAlB,6EACCL,QAAQC,IAAI,UACZsC,EAESgB,EAAOzD,GAFhB,eAEwByD,EAFxB,CAEgC5D,OAAQa,KACtCS,MAAK,SAAAyC,GACH/B,EAAWD,EAAQiC,KAAI,SAAAC,GAAK,OAAIA,EAAM9D,KAAOyD,EAAOzD,GAAK8D,EAAQF,MACnErB,EAAiB,kBACjBQ,YAAW,WACTR,EAAiB,QAChB,QAEHS,OAAM,SAAAC,GACJZ,EAAgB,WAAD,OACF9B,EADE,sCAGfwC,YAAW,WACRV,EAAgB,QAChB,KACHR,EAAWD,EAAQkB,QAAO,SAAAgB,GAAK,OAAIA,EAAM9D,KAAOyD,EAAOzD,UAE1DE,QAAQC,IAAI,WAAYyB,GACxBE,EAAW,IACXC,EAAa,KAapBU,EANoB,CACjB7C,KAAMW,EACNV,OAAQa,IAMNS,MAAK,SAAA0B,GACNhB,EAAWD,EAAQmC,OAAOlB,IAC1BN,EAAiB,WAAD,OAAYhC,EAAZ,YACZwC,YAAW,WACTR,EAAiB,QAChB,QAENS,OAAM,SAAAC,GACDZ,EAAgB,yBAAD,OACY9B,EADZ,gBAGfwC,YAAW,WACRV,EAAgB,QAChB,QAKbP,EAAW,IACXC,EAAa,IACbG,EAAc,KA4FkB3B,QAASA,EACpCE,iBAjEgB,SAAC6C,GACvBpD,QAAQC,IAAImD,EAAMC,OAAOjD,OACzBwB,EAAWwB,EAAMC,OAAOjD,QA+DkBI,UAAWA,EAC/CC,mBA9DkB,SAAC2C,GACzBpD,QAAQC,IAAImD,EAAMC,OAAOjD,OACzByB,EAAauB,EAAMC,OAAOjD,UA8DzB,uCACA,4BACI4C,EAAaW,KAAI,SAAClE,EAAQC,GAAT,OAChB,kBAAC,EAAD,CAAOoE,IAAKpE,EAAMD,OAAQA,EAAQI,YAAaA,QAlBtD,QC5KJkE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.dcd7415b.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Phone = ( props ) => {\r\n  return (<li className=\"persons\">{props.person.name}  {props.person.number}\r\n          <button onClick={() => {props.deletePhone(props.person.id)}}>\r\n           Delete </button>\r\n  \t</li>\r\n  )\r\n}\r\n\r\nexport default Phone","import React from 'react'\r\n\r\nconst PersonForm = (props) =>{\r\n\tconsole.log(\"Phone 1 \" , props)\r\n\t//persons(props.persons)\r\n   return (\r\n   \t <div>\r\n       <form onSubmit={props.addPhone}>\r\n        <div>name: \r\n         <input \r\n            value={props.newName} \r\n            onChange={props.handleNameChange} \r\n          /></div>\r\n        <div>number: \r\n         <input \r\n            value={props.newNumber} \r\n            onChange={props.handleNumberChange} \r\n          />       \r\n        </div>\r\n\r\n        <div><button type=\"submit\">add</button></div>\r\n        \r\n      </form>\r\n      </div>\r\n   )\r\n\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = (props) =>{\r\n\t//console.log(\"Fillter 1 \" , props)\r\n\treturn (\r\n   \t<div>filter shown with: \r\n       <input \r\n          value={props.searchItem} \r\n          onChange={props.handleFilterChange} />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n//const baseUrl = '/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  \r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst delPhone = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, delPhone}\r\n","import React, { useState, useEffect } from 'react'\nimport Phone from './components/Phone'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport axios from 'axios'\nimport phoneService from './services/phones'\n\nconst App = () => {\n  \n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  //const [showAll, setShowAll] = useState(true)\n  const [showAll, setShowAll] = useState('')\n  const [searchItem, setSearchItem] = useState('')\n  const [searchItemsFind, setItemsFind] = useState([])\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [normalMessage, setNormalMessage] = useState(null)\n\n  useEffect(() => {\n     phoneService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n       })\n   \n  }, [])  \n  //console.log('render', persons.length, 'persons')\n\n  const addPhone = (event) => {\n      event.preventDefault()\n      //console.log('button clicked', event.target)\n      //event.target = tapahtuman kohde\n      //console.log(\"persons 1 \", newName)\n      //console.log(\"persons 2 \", persons.find(element => element === newName))\n      const exists = persons.find(element => element.name === newName)\n      console.log(\"persons 2 \", exists)\n      if (exists){\n        if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n            console.log(\"update\")\n            phoneService\n            //.delPhone(phoneObject)\n             .update(exists.id, {...exists, number: newNumber})\n             .then(updatedPhone => {\n                setPersons(persons.map(phone => phone.id !== exists.id ? phone : updatedPhone))  \n              setNormalMessage(\"Number updated\")     \n              setTimeout(() => {\n                setNormalMessage(null)\n              }, 5000)\n             })  \n             .catch(error => {\n                setErrorMessage(\n                  `Person '${newName}' was already removed from server`\n                )\n                setTimeout(() => {\n                   setErrorMessage(null)\n                }, 5000)\n                setPersons(persons.filter(phone => phone.id !== exists.id))\n              })  \n             console.log(\"update2 \" ,persons)\n             setNewName('')\n             setNewNumber('')\n             }\n        }\n        \n      //}\n      else {\n      \n      const phoneObject = {\n         name: newName,\n         number: newNumber\n         //important: Math.random() > 0.5,\n         //id: newName,\n      }\n      phoneService\n         .create(phoneObject)\n          .then(returnedPhone => {\n          setPersons(persons.concat(returnedPhone))  \n          setNormalMessage(`Person '${newName}' added`)     \n              setTimeout(() => {\n                setNormalMessage(null)\n              }, 5000)\n          })\n          .catch(error => {\n                setErrorMessage(\n                  `Error happen, person '${newName}' not added`\n                )\n                setTimeout(() => {\n                   setErrorMessage(null)\n                }, 5000)\n                //setPersons(persons.filter(phone => phone.id !== exists.id))\n              })  \n           \n    }\n      setNewName('')\n      setNewNumber('')\n      setSearchItem('')\n  }\n\n  const deletePhone = id => {\n    if (window.confirm('Are you sure you wish to delete this item?')) {\n\n     phoneService\n         //.delPhone(phoneObject)\n         .delPhone(id)\n          .then(returnedPhone => {\n          setPersons(persons.filter(persons => persons.id !== id))  \n          setNormalMessage(\"Number deleted\")     \n              setTimeout(() => {\n                setNormalMessage(null)\n              }, 5000)\n          }) \n          .catch(error => {\n                setErrorMessage(\n                  `Person '${newName}' and number was already removed from server`\n                )\n                setTimeout(() => {\n                   setErrorMessage(null)\n                }, 5000)\n                setPersons(persons.filter(persons => persons.id !== id))\n              })   \n     }\n  }\n  \n  const handleNameChange = (event) => {\n     console.log(event.target.value)\n     setNewName(event.target.value)  \n  }\n  const handleNumberChange = (event) => {\n     console.log(event.target.value)\n     setNewNumber(event.target.value)  \n  }\n\n  const handleFilterChange = (event) => {\n     console.log(event.target.value)\n     setSearchItem(event.target.value)  \n  }\n\n  const phonesToShow = showAll\n     ? persons\n     : persons.filter(person => person.name.toLowerCase().includes(searchItem))\n\n\n   useEffect(() => {\n     \n          const filterResults = persons.filter(person => \n      //console.log(\"search item \", searchItem)\n      person.name.toLowerCase().includes(searchItem)\n    );\n    setItemsFind(filterResults);\n    \n   }, [searchItem])\n  \n  \n  const ErrorNotification = ({ errorMessage }) => {\n     if (errorMessage === null) {\n       return null\n     }\n     return (\n        <div className=\"error\">\n          {errorMessage}\n        </div>\n     )\n  }\n\n  const NormalNotification = ({ normalMessage }) => {\n     if (normalMessage === null) {\n       return null\n     }\n     return (\n        <div className=\"normal\">\n          {normalMessage}\n        </div>\n     )\n  }\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <NormalNotification normalMessage={normalMessage} />\n      <ErrorNotification errorMessage={errorMessage} />\n      \n      <Filter searchItem={searchItem} handleFilterChange={handleFilterChange} \n      setShowAll={setShowAll} showAll={showAll}/>\n          \n        \n      <h3>Add a new </h3>\n      \n      <PersonForm addPhone={addPhone} newName={newName}\n           handleNameChange={handleNameChange} newNumber={newNumber}\n           handleNumberChange={handleNumberChange}  />\n    \n      <h3>Numbers</h3>\n      <ul>\n         {phonesToShow.map((person, name) => \n           <Phone key={name} person={person} deletePhone={deletePhone} />\n         )} \n      </ul>\n      ...\n    </div>\n  )\n\n}\n\n/*<div>filter shown with: \n     <input \n        value={searchItem} \n        onChange={handleFilterChange} \n     />\n  </div>\n*/ \n /* \n      <form onSubmit={addPhone}>\n        <div>name: \n         <input \n            value={newName} \n            onChange={handleNameChange} \n          /></div>\n        <div>number: \n         <input \n            value={newNumber} \n            onChange={handleNumberChange} \n          />       \n        </div>\n\n        <div><button type=\"submit\">add</button></div>\n        \n      </form> */\n      /*\n      <h3>Numbers</h3>\n      <ul>\n         {phonesToShow.map((person, name) => \n           <Phone key={name} person={person}  />\n         )} \n      </ul>\n      */\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}